<h2 class="dialog-naslov">
  {{ data.mode === 'edit' ? 'Izmena semestra' : 'Dodavanje semestra' }}
</h2>

<div class="dialog-content-scroll">
  <form [formGroup]="form" class="semestar-form" (ngSubmit)="onSubmit()">

    <!-- TIP (text input) -->
    <mat-form-field appearance="outline" class="w-100 mb-3">
      <mat-label>Naziv</mat-label>
      <input matInput type="text" formControlName="tip">
      <mat-error *ngIf="form.get('tip')?.hasError('required')">Polje je obavezno</mat-error>
      <mat-error *ngIf="form.get('tip')?.hasError('maxlength')">Maksimalna dužina je 50 karaktera</mat-error>
      <mat-error *ngIf="form.get('tip')?.hasError('firstUppercase') && !form.get('tip')?.hasError('required')">
        Tip mora počinjati velikim slovom.
        </mat-error>

    </mat-form-field>

    <!-- POČETAK: datum + vreme -->
    <div class="row">
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Početak - datum</mat-label>
        <input matInput [matDatepicker]="pickerPoc" formControlName="datumPocetak">
        <mat-datepicker-toggle matSuffix [for]="pickerPoc"></mat-datepicker-toggle>
        <mat-datepicker #pickerPoc></mat-datepicker>
        <mat-error *ngIf="form.get('datumPocetak')?.hasError('required')">Polje je obavezno</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Početak - vreme</mat-label>
        <input matInput type="time" formControlName="vremePocetak">
        <mat-error *ngIf="form.get('vremePocetak')?.hasError('required')">Polje je obavezno</mat-error>
      </mat-form-field>
    </div>

    <!-- KRAJ: datum + vreme -->
    <div class="row">
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Kraj - datum</mat-label>
        <input matInput [matDatepicker]="pickerKraj" formControlName="datumKraj">
        <mat-datepicker-toggle matSuffix [for]="pickerKraj"></mat-datepicker-toggle>
        <mat-datepicker #pickerKraj></mat-datepicker>
        <mat-error *ngIf="form.get('datumKraj')?.hasError('required')">Polje je obavezno</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Kraj - vreme</mat-label>
        <input matInput type="time" formControlName="vremeKraj">
        <mat-error *ngIf="form.get('vremeKraj')?.hasError('required')">Polje je obavezno</mat-error>
      </mat-form-field>
    </div>

    <!-- Range greška -->
    <div *ngIf="form.errors?.['rangeInvalid']" class="text-danger">
      Kraj mora biti posle početka.
    </div>

    <div *ngIf="errorMessage" class="alert alert-secondary mt-3" role="banner">
      {{ errorMessage }}
    </div>

    <div class="text-end mt-3">
      <button mat-button type="button" (click)="onCancel()">Otkaži</button>
      <button mat-flat-button color="primary" type="submit" [disabled]="form.invalid">Sačuvaj</button>
    </div>
  </form>
</div>
