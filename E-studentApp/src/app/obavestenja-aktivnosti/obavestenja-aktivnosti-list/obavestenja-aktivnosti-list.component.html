<div class="container mt-3">
  <div class="d-flex justify-content-between align-items-center mb-2">
    <h3 class="m-0">Obaveštenja aktivnosti</h3>
  </div>

  <div class="alert alert-danger" *ngIf="errorMessage">{{ errorMessage }}</div>

  <table class="table table-striped table-hover obav-table">
    <colgroup>
      <col class="col-index" />
      <col class="col-naslov" />
      <col class="col-tekst" />
      <col class="col-datum" />
      <col class="col-vreme" />
      <col class="col-korisnik" />
      <col class="col-akcije" />
    </colgroup>
    <thead>
      <tr>
        <th>#</th>
        <th>Naslov</th>
        <th>Tekst</th>
        <th>Datum</th>
        <th>Korisnik</th>
        <th>Akcije</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let o of obavestenjaAktivnosti | paginate: { itemsPerPage: itemsPerPage, currentPage: currentPage }; let i = index">
        <td>{{ (currentPage - 1) * itemsPerPage + i + 1 }}</td>
        <td>{{ o.naslov }}</td>

        <td class="tekst-cell">
          <div class="tekst-scroll" [title]="o.sadrzaj">{{ o.sadrzaj }}</div>
        </td>

        <td>{{ o.vremePostavljanja| date:'dd.MM.yyyy HH:mm' }}</td>

        <td>
          {{ o.registrovaniKorisnik.korisnickoIme || (o.registrovaniKorisnik.ime + ' ' + o.registrovaniKorisnik.prezime) }}
        </td>

        <td class="actions">
          <button class="btn btn-sm btn-outline-primary me-1" (click)="openEditDialog(o)">Izmeni</button>
          <button class="btn btn-sm btn-outline-danger" (click)="delete(o.id!)">Obriši</button>
        </td>
      </tr>
    </tbody>
  </table>

  <div class="text-center my-3">
    <button class="btn btn-primary" (click)="openAddDialog()">Dodaj</button>
  </div>

  <pagination-controls (pageChange)="currentPage = $event"></pagination-controls>
</div>
